<!DOCTYPE html>
<html>
  <head>
    <script src="../static/sigma.js/build/sigma.min.js"></script>
    <script src="../static/sigma.js/plugins/sigma.parsers.json/sigma.parsers.json.js"></script>
    <script src="../static/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <script> var exports = {}; </script>
    <script type="text/javascript" src="../static/js/main.js"></script>

    <link rel="stylesheet" href="https://unpkg.com/tachyons@4.10.0/css/tachyons.min.css"/>
    <link rel="stylesheet" href="../static/css/main.css">
  </head>
  <body class="container">
    <div class="row">
        <div class="header f2 fw7 ttu tracked lh-title avenir pv4">
          CDCL Visualizer
        </div>
    </div>

    <div class="row flex-row">
      <div id="sigma-container" style="width:50%"></div>

      <div class="flex-col" style="width: 40%">
        <div class="clauses">
          <div class="row">
            <label for="clauseLibrary" class="f6 b db mb1">Clause Database <span class="normal black-60"></span></label>
            <small id="clauseLibrary-desc" class="f6 black-60">Add data input layout info here</small>
            <textarea id="clauseLibrary" rows="8" cols="50" class="db border-box hover-black w-100 ba b--black-20 pa2 br2 mt2 mb2" aria-describedby="clauseLibrary-desc"></textarea>
          </div>

          <div class="row" style="text-align:right">
            <a class="f6 link dim br2 ba ph3 pv2 mb2 dib dark-gray" onclick="sendClauseLibrary(getElementById('clauseLibrary').value)">
              Generate
            </a>
          </div>

        </div>

        <div id="selectionSection" class="row flex-row f6 br2 ba ph3 pv2 mb2 moon-gray" style="width:100%; display:none">
          <div class="dropdown flex-col" style="width: 40%; align-items: flex-start">
            <select id="varDropdown" onchange="updateSelectedVar();" style="display:none">
              <option value="" disabled selected>Select a proposition</option>
            </select>
          </div>

          <div class="flex-col" style="width: 30%; align-items: center">
            <a id="decideVar" onclick="sendDecision(true)" class="f6 link dim ph3 pv2 mb2 white bg-dark-green br2" style="display:none">Decide p1</a>
          </div>

          <div class="flex-col" style="width: 30%; align-items: flex-end">
            <a id="decideNotVar" onclick="sendDecision(false)" class="f6 link dim ph3 pv2 mb2 white bg-dark-pink br2" style="display:none">Decide not p1</a>
          </div>
        </div>

        <div class="row">
          <div id="errorMsg"></div>
          <div id="currentLevel" class="f5 b db mb1" style="display:none"></div>
          <!-- <div class="info">
            May be where the updated clause database and/or explanations is displayed
          </div> -->
        </div>
      </div>



    </div>

    <div class="row flex-row">
        <div class="br2 bw2 ba ph3 pv2 mb2 washed-red br--bottom-l bg-washed-red bt-0" id="conflictSection" style="width:50%;display:none">
          <div class="mid-gray" style="display:inline-flex;">Step through the conflict</div>
          <div style="display:inline-flex;">
            <a id="conflict_getUIPs" onclick="getUIPs()" class="f6 link dim ph3 pv2 ml3 mid-gray bg-white br2">
              View Unique Implication Points (UIPs)
            </a>
            <a id="conflict_getUIP" onclick="getClosestUIP()" class="f6 link dim ph3 pv2 ml3 mid-gray bg-white br2" style="display:none">
              View Closest UIP
            </a>
            <a id="conflict_showCut" onclick="showCut()" class="f6 link dim ph3 pv2 ml3 mid-gray bg-white br2" style="display:none">
              Show Cut
            </a>
            <a id="conflict_addConflictClause" onclick="addConflictClause()" class="f6 link dim ph3 pv2 ml3 mid-gray bg-white br2" style="display:none">
              Add Conflict Clause
            </a>
          </div>
        </div>
        <div style="width:40%"></div>
    </div>

    <script>
      // Initialize sigma:
      s = new sigma(
        {
           renderer: {
             container: document.getElementById('sigma-container'),
             type: 'canvas'
           },
           settings: {
             defaultNodeColor: '#357EDD',
             labelThreshold: 0,
             minEdgeSize: 3,
             maxEdgeSize: 3,
             minArrowSize: 12
           }
         }
       );

       // to-do: draggable + zoomable graph
       // this zooms out
       s.cameras[0].goTo({ x: 0, y: 0, angle: 0, ratio: 1.5 });
    </script>
  </body>
</html>
